<Type Name="FileUpload" FullName="System.Web.UI.WebControls.FileUpload">
  <Metadata><Meta Name="ms.openlocfilehash" Value="29976c50aa2e70e1adcd3ba21e2c26c7b684fa9e" /><Meta Name="ms.sourcegitcommit" Value="634678f7ccd2928c6b2cf792a301b079b63639af" /><Meta Name="ms.translationtype" Value="MT" /><Meta Name="ms.contentlocale" Value="zh-CN" /><Meta Name="ms.lasthandoff" Value="07/26/2019" /><Meta Name="ms.locfileid" Value="68542514" /></Metadata><TypeSignature Language="C#" Value="public class FileUpload : System.Web.UI.WebControls.WebControl" />
  <TypeSignature Language="ILAsm" Value=".class public auto ansi beforefieldinit FileUpload extends System.Web.UI.WebControls.WebControl" />
  <TypeSignature Language="DocId" Value="T:System.Web.UI.WebControls.FileUpload" />
  <TypeSignature Language="VB.NET" Value="Public Class FileUpload&#xA;Inherits WebControl" />
  <TypeSignature Language="C++ CLI" Value="public ref class FileUpload : System::Web::UI::WebControls::WebControl" />
  <TypeSignature Language="F#" Value="type FileUpload = class&#xA;    inherit WebControl" />
  <AssemblyInfo>
    <AssemblyName>System.Web</AssemblyName>
    <AssemblyVersion>2.0.0.0</AssemblyVersion>
    <AssemblyVersion>4.0.0.0</AssemblyVersion>
  </AssemblyInfo>
  <Base>
    <BaseTypeName>System.Web.UI.WebControls.WebControl</BaseTypeName>
  </Base>
  <Interfaces />
  <Attributes>
    <Attribute FrameworkAlternate="netframework-4.0;netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
      <AttributeName>System.ComponentModel.Designer("System.Web.UI.Design.WebControls.PreviewControlDesigner, System.Design, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.Web.UI.ControlValueProperty("FileBytes")</AttributeName>
    </Attribute>
    <Attribute>
      <AttributeName>System.Web.UI.ValidationProperty("FileName")</AttributeName>
    </Attribute>
    <Attribute FrameworkAlternate="netframework-2.0;netframework-3.0;netframework-3.5">
      <AttributeName>System.ComponentModel.Designer("System.Web.UI.Design.WebControls.PreviewControlDesigner, System.Design, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")</AttributeName>
    </Attribute>
  </Attributes>
  <Docs>
    <summary><span data-ttu-id="f3009-101">显示一个文本框控件和一个浏览按钮，使用户可以选择要上载到服务器的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-101">Displays a text box control and a browse button that enable users to select a file to upload to the server.</span></span></summary>
    <remarks>
      <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-102">本主题内容：</span><span class="sxs-lookup"><span data-stu-id="f3009-102">In this topic:</span></span>  
  
-   [<span data-ttu-id="f3009-103">介绍</span><span class="sxs-lookup"><span data-stu-id="f3009-103">Introduction</span></span>](#introduction)  
  
-   [<span data-ttu-id="f3009-104">正在保存上载的文件</span><span class="sxs-lookup"><span data-stu-id="f3009-104">Saving Uploaded Files</span></span>](#saving_uploaded_files)  
  
-   [<span data-ttu-id="f3009-105">安全注意事项</span><span class="sxs-lookup"><span data-stu-id="f3009-105">Security Considerations</span></span>](#security_considerations)  
  
-   [<span data-ttu-id="f3009-106">内存限制</span><span class="sxs-lookup"><span data-stu-id="f3009-106">Memory Limitations</span></span>](#memory_limitations)  
  
-   [<span data-ttu-id="f3009-107">将 FileUpload 控件与 UpdatePanel 控件一起使用</span><span class="sxs-lookup"><span data-stu-id="f3009-107">Using the FileUpload Control with the UpdatePanel Control</span></span>](#using_the_FileUpload_Control_with_the_UpdatePanel_control)  
  
-   [<span data-ttu-id="f3009-108">声明性语法</span><span class="sxs-lookup"><span data-stu-id="f3009-108">Declarative Syntax</span></span>](#DeclarativeSyntax)  
  
<a name="introduction"></a>   
## <a name="introduction"></a><span data-ttu-id="f3009-109">介绍</span><span class="sxs-lookup"><span data-stu-id="f3009-109">Introduction</span></span>  
 <span data-ttu-id="f3009-110"><xref:System.Web.UI.WebControls.FileUpload>类将显示一个文本框控件和一个浏览按钮, 使用户可以在客户端上选择文件并将其上传到 Web 服务器。</span><span class="sxs-lookup"><span data-stu-id="f3009-110">The <xref:System.Web.UI.WebControls.FileUpload> class displays a text box control and a browse button that enable users to select a file on the client and upload it to the Web server.</span></span> <span data-ttu-id="f3009-111">用户通过在控件文本框中输入本地计算机上的文件的完整路径 (例如, **C:\MyFiles\TestFile.txt**) 来指定要上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-111">The user specifies the file to upload by entering the full path of the file on the local computer (for example, **C:\MyFiles\TestFile.txt**) in the text box of the control.</span></span> <span data-ttu-id="f3009-112">或者, 用户可以通过单击 "**浏览**" 按钮选择该文件, 然后在 "**选择文件**" 对话框中找到它。</span><span class="sxs-lookup"><span data-stu-id="f3009-112">Alternately, the user can select the file by clicking the **Browse** button, and then locating it in the **Choose File** dialog box.</span></span>  
  
 <span data-ttu-id="f3009-113">使用属性可获取客户端上<xref:System.Web.UI.WebControls.FileUpload>使用控件上载的文件的名称。 <xref:System.Web.UI.WebControls.FileUpload.FileName%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-113">Use the <xref:System.Web.UI.WebControls.FileUpload.FileName%2A> property to get the name of a file on a client to upload by using the <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-114">此属性返回的文件名不包括客户端上文件的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-114">The file name that this property returns does not include the path of the file on the client.</span></span>  
  
 <span data-ttu-id="f3009-115">属性获取一个<xref:System.IO.Stream>指向要上传的文件的对象。 <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-115">The <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property gets a <xref:System.IO.Stream> object that points to a file to upload.</span></span> <span data-ttu-id="f3009-116">使用此属性以字节的形式访问该文件的内容。</span><span class="sxs-lookup"><span data-stu-id="f3009-116">Use this property to access the contents of the file as bytes.</span></span> <span data-ttu-id="f3009-117">例如, 你可以使用<xref:System.IO.Stream> <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A>属性返回的对象将文件内容作为字节来读取, 并将其存储在字节数组中。</span><span class="sxs-lookup"><span data-stu-id="f3009-117">For example, you can use the <xref:System.IO.Stream> object that is returned by the <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property to read the contents of the file as bytes and store them in a byte array.</span></span> <span data-ttu-id="f3009-118">或者, 可以使用<xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A>属性来检索文件中的所有字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-118">Alternatively, you can use the <xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A> property to retrieve all the bytes in the file.</span></span>  
  
 <span data-ttu-id="f3009-119">属性获取要上载的<xref:System.Web.HttpPostedFile>文件的基础对象。 <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-119">The <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property gets the underlying <xref:System.Web.HttpPostedFile> object for the file to upload.</span></span> <span data-ttu-id="f3009-120">您可以使用此属性来访问该文件的其他属性。</span><span class="sxs-lookup"><span data-stu-id="f3009-120">You can use this property to access additional properties on the file.</span></span> <span data-ttu-id="f3009-121"><xref:System.Web.HttpPostedFile.ContentLength%2A>属性获取文件的长度。</span><span class="sxs-lookup"><span data-stu-id="f3009-121">The <xref:System.Web.HttpPostedFile.ContentLength%2A> property gets the length of the file.</span></span> <span data-ttu-id="f3009-122"><xref:System.Web.HttpPostedFile.ContentType%2A>属性获取文件的 MIME 内容类型。</span><span class="sxs-lookup"><span data-stu-id="f3009-122">The <xref:System.Web.HttpPostedFile.ContentType%2A> property gets the MIME content type of the file.</span></span> <span data-ttu-id="f3009-123">此外, <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A>还可以使用属性来<xref:System.Web.HttpPostedFile.FileName%2A>访问属性、 <xref:System.Web.HttpPostedFile.InputStream%2A>属性和<xref:System.Web.HttpPostedFile.SaveAs%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-123">In addition, you can use the <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property to access the <xref:System.Web.HttpPostedFile.FileName%2A> property, the <xref:System.Web.HttpPostedFile.InputStream%2A> property, and the <xref:System.Web.HttpPostedFile.SaveAs%2A> method.</span></span> <span data-ttu-id="f3009-124">但是, <xref:System.Web.UI.WebControls.FileUpload.FileName%2A>属性<xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> 、属性和<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法提供了相同的功能。</span><span class="sxs-lookup"><span data-stu-id="f3009-124">However, the same functionality is provided by the <xref:System.Web.UI.WebControls.FileUpload.FileName%2A> property, the <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property, and the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method.</span></span>  
  
<a name="saving_uploaded_files"></a>   
## <a name="saving-uploaded-files"></a><span data-ttu-id="f3009-125">正在保存上载的文件</span><span class="sxs-lookup"><span data-stu-id="f3009-125">Saving Uploaded Files</span></span>  
 <span data-ttu-id="f3009-126">用户<xref:System.Web.UI.WebControls.FileUpload>选择要上载的文件后, 控件不会自动将文件保存到服务器。</span><span class="sxs-lookup"><span data-stu-id="f3009-126">The <xref:System.Web.UI.WebControls.FileUpload> control does not automatically save a file to the server after the user selects the file to upload.</span></span> <span data-ttu-id="f3009-127">您必须显式提供一个控件或机制以允许用户提交指定的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-127">You must explicitly provide a control or mechanism to allow the user to submit the specified file.</span></span> <span data-ttu-id="f3009-128">例如, 你可以提供一个按钮, 用户单击它即可上传文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-128">For example, you can provide a button that the user clicks to upload the file.</span></span> <span data-ttu-id="f3009-129">你编写的用于保存指定文件的代码应调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法, 该方法会将文件内容保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-129">The code that you write to save the specified file should call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method, which saves the contents of a file to a specified path on the server.</span></span> <span data-ttu-id="f3009-130">通常, <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>在引发回发到服务器的事件的事件处理方法中调用方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-130">Typically, the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called in an event-handling method for an event that raises a post back to the server.</span></span> <span data-ttu-id="f3009-131">例如, 如果你提供了一个用于提交文件的按钮, 则可以包含代码以将该文件保存在 click 事件的事件处理方法内。</span><span class="sxs-lookup"><span data-stu-id="f3009-131">For example, if you provide a button to submit a file, you could include the code to save the file inside the event-handling method for the click event.</span></span>  
  
 <span data-ttu-id="f3009-132">在调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法以将文件保存到服务器之前, 请<xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>使用<xref:System.Web.UI.WebControls.FileUpload>属性来验证控件是否包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-132">Before calling the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method to save the file to the server, use the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> property to verify that the <xref:System.Web.UI.WebControls.FileUpload> control contains a file.</span></span> <span data-ttu-id="f3009-133"><xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>如果返回`true`, 则调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-133">If the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> returns `true`, call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method.</span></span> <span data-ttu-id="f3009-134">如果它返回`false`, 则向用户显示一条消息, 指示该控件不包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-134">If it returns `false`, display a message to the user indicating that the control does not contain a file.</span></span> <span data-ttu-id="f3009-135">不要检查<xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A>属性以确定要上传的文件是否存在, 因为默认情况下, 此属性包含0个字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-135">Do not check the <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property to determine whether a file to upload exists because, by default, this property contains 0 bytes.</span></span> <span data-ttu-id="f3009-136">因此, 即使<xref:System.Web.UI.WebControls.FileUpload>控件为空白<xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> , 属性也将返回一个非 null 值。</span><span class="sxs-lookup"><span data-stu-id="f3009-136">As a result, even when the <xref:System.Web.UI.WebControls.FileUpload> control is blank, the <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property returns a non-null value.</span></span>  
  
<a name="security_considerations"></a>   
## <a name="security-considerations"></a><span data-ttu-id="f3009-137">安全注意事项</span><span class="sxs-lookup"><span data-stu-id="f3009-137">Security Considerations</span></span>  
 <span data-ttu-id="f3009-138">调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法时, 必须指定要在其中保存上载文件的目录的完整路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-138">When you call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method, you must specify the full path of the directory in which to save the uploaded file.</span></span> <span data-ttu-id="f3009-139">如果未在应用程序代码中显式指定路径, 则当用户尝试上传文件时, 将引发异常。</span><span class="sxs-lookup"><span data-stu-id="f3009-139">If you do not explicitly specify a path in your application code, an exception is thrown when a user attempts to upload a file.</span></span> <span data-ttu-id="f3009-140">此行为可防止用户在应用程序的目录结构中写入任意位置以及阻止对敏感的根目录的访问, 从而有助于保护服务器上的文件的安全。</span><span class="sxs-lookup"><span data-stu-id="f3009-140">This behavior helps keep the files on the server secure by preventing users from being able to write to arbitrary locations in your application's directory structure, as well as preventing access to sensitive root directories.</span></span>  
  
 <span data-ttu-id="f3009-141"><xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法将上传的文件写入指定的目录。</span><span class="sxs-lookup"><span data-stu-id="f3009-141">The <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method writes the uploaded file to the specified directory.</span></span> <span data-ttu-id="f3009-142">因此, ASP.NET 应用程序必须具有对服务器上的目录的写访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-142">Therefore, the ASP.NET application must have write access to the directory on the server.</span></span> <span data-ttu-id="f3009-143">应用程序可以通过两种方式获取写入访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-143">There are two ways that the application can get write access.</span></span> <span data-ttu-id="f3009-144">你可以在将保存上载文件的目录中显式授予对运行应用程序的帐户的写入权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-144">You can explicitly grant write access to the account under which the application is running, in the directory in which the uploaded files will be saved.</span></span> <span data-ttu-id="f3009-145">或者, 可以增加授予 ASP.NET 应用程序的信任级别。</span><span class="sxs-lookup"><span data-stu-id="f3009-145">Alternatively, you can increase the level of trust that is granted to the ASP.NET application.</span></span> <span data-ttu-id="f3009-146">若要对应用程序的执行目录进行写入访问, 必须为应用程序授予<xref:System.Web.AspNetHostingPermission>信任级别设置<xref:System.Web.AspNetHostingPermissionLevel.Medium?displayProperty=nameWithType>为值的对象。</span><span class="sxs-lookup"><span data-stu-id="f3009-146">To get write access to the executing directory for the application, the application must be granted the <xref:System.Web.AspNetHostingPermission> object with the trust level set to the <xref:System.Web.AspNetHostingPermissionLevel.Medium?displayProperty=nameWithType> value.</span></span> <span data-ttu-id="f3009-147">提高信任级别会增加应用程序访问服务器上资源的权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-147">Increasing the level of trust increases the application's access to resources on the server.</span></span> <span data-ttu-id="f3009-148">请注意, 这并不是一种安全的方法, 因为获得您的应用程序控制的恶意用户也可以在这一更高的信任级别下运行。</span><span class="sxs-lookup"><span data-stu-id="f3009-148">Note that this is not a secure approach, because a malicious user who gains control of your application will also be able to run under this higher level of trust.</span></span> <span data-ttu-id="f3009-149">最佳做法是在用户的上下文中运行 ASP.NET 应用程序, 该用户具有运行应用程序所需的最小特权。</span><span class="sxs-lookup"><span data-stu-id="f3009-149">It is a best practice to run an ASP.NET application in the context of a user with the minimum privileges that are required for the application to run.</span></span> <span data-ttu-id="f3009-150">有关 ASP.NET 应用程序中的安全性的详细信息, 请参阅[Web 应用程序的基本安全实践](https://msdn.microsoft.com/library/3eeeee9e-b09f-4c7f-8ce5-d9ca1f9322ad)和[ASP.NET 信任级别和策略文件](https://msdn.microsoft.com/library/f897c794-10d3-414c-86b7-59b66564bbf1)。</span><span class="sxs-lookup"><span data-stu-id="f3009-150">For more information about security in ASP.NET applications, see [Basic Security Practices for Web Applications](https://msdn.microsoft.com/library/3eeeee9e-b09f-4c7f-8ce5-d9ca1f9322ad) and [ASP.NET Trust Levels and Policy Files](https://msdn.microsoft.com/library/f897c794-10d3-414c-86b7-59b66564bbf1).</span></span>  
  
<a name="memory_limitations"></a>   
## <a name="memory-limitations"></a><span data-ttu-id="f3009-151">内存限制</span><span class="sxs-lookup"><span data-stu-id="f3009-151">Memory Limitations</span></span>  
 <span data-ttu-id="f3009-152">防范拒绝服务攻击的一种方法是限制可使用<xref:System.Web.UI.WebControls.FileUpload>控件上传的文件的大小。</span><span class="sxs-lookup"><span data-stu-id="f3009-152">One way to guard against denial of service attacks is to limit the size of the files that can be uploaded by using the <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-153">应设置适用于预计要上传的文件类型的大小限制。</span><span class="sxs-lookup"><span data-stu-id="f3009-153">You should set a size limit that is appropriate for the types of files that you expect to be uploaded.</span></span> <span data-ttu-id="f3009-154">默认大小限制为 4096 kb, 即4兆字节 (MB)。</span><span class="sxs-lookup"><span data-stu-id="f3009-154">The default size limit is 4096 kilobytes (KB), or 4 megabytes (MB).</span></span> <span data-ttu-id="f3009-155">可以通过设置`maxRequestLength` [httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369)元素的属性, 允许上载更大的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-155">You can allow larger files to be uploaded by setting the `maxRequestLength` attribute of the [httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369) element.</span></span> <span data-ttu-id="f3009-156">若要为整个应用程序增加允许的最大文件大小, `maxRequestLength`请在 web.config 文件中设置特性。</span><span class="sxs-lookup"><span data-stu-id="f3009-156">To increase the maximum allowable file size for the entire application, set the `maxRequestLength` attribute in the Web.config file.</span></span> <span data-ttu-id="f3009-157">若要增加指定页允许的最大文件大小, 请在`maxRequestLength` web.config 中的`location`元素内设置特性。有关示例, 请参阅[Location 元素 (ASP.NET Settings Schema)](https://msdn.microsoft.com/library/922ef7d5-da38-4661-b1c6-5b9e5ceda1d5)。</span><span class="sxs-lookup"><span data-stu-id="f3009-157">To increase the maximum allowable file size for a specified page, set the `maxRequestLength` attribute inside the `location` element in Web.config. For an example, see [location Element (ASP.NET Settings Schema)](https://msdn.microsoft.com/library/922ef7d5-da38-4661-b1c6-5b9e5ceda1d5).</span></span>  
  
 <span data-ttu-id="f3009-158">上传大型文件时, 用户可能还会收到以下错误消息:</span><span class="sxs-lookup"><span data-stu-id="f3009-158">When uploading large files, a user might also receive the following error message:</span></span>  
  
 `aspnet_wp.exe (PID: 1520) was recycled because memory consumption exceeded 460 MB (60 percent of available RAM).`  
  
 <span data-ttu-id="f3009-159">如果用户遇到此错误消息, 请将应用程序的 web.config `memoryLimit`文件的[processModel](https://msdn.microsoft.com/library/4b8fe20e-74c8-4566-b72c-ce5f83c8e32d)元素中的属性值增加。</span><span class="sxs-lookup"><span data-stu-id="f3009-159">If your users encounter this error message, increase the value of the `memoryLimit` attribute in the [processModel](https://msdn.microsoft.com/library/4b8fe20e-74c8-4566-b72c-ce5f83c8e32d) of element the Web.config file for the application.</span></span> <span data-ttu-id="f3009-160">`memoryLimit`特性指定辅助进程可使用的最大内存量。</span><span class="sxs-lookup"><span data-stu-id="f3009-160">The `memoryLimit` attribute specifies the maximum amount of memory that a worker process can use.</span></span> <span data-ttu-id="f3009-161">如果工作进程超出了该`memoryLimit`数量, 则将创建一个新进程来替换它, 并将所有当前请求重新分配给新进程。</span><span class="sxs-lookup"><span data-stu-id="f3009-161">If the worker process exceeds the `memoryLimit` amount, a new process is created to replace it, and all current requests are reassigned to the new process.</span></span>  
  
 <span data-ttu-id="f3009-162">若要控制在处理请求时, 要上传的文件是否暂时存储在内存中, 或在服务器上进行`requestLengthDiskThreshold`处理, 请设置[httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369)元素的属性。</span><span class="sxs-lookup"><span data-stu-id="f3009-162">To control whether the file to upload is temporarily stored in memory or on the server while the request is being processed, set the `requestLengthDiskThreshold` attribute of the [httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369) element.</span></span> <span data-ttu-id="f3009-163">此属性使你能够管理输入流缓冲区的大小。</span><span class="sxs-lookup"><span data-stu-id="f3009-163">This attribute enables you to manage the size of the input stream buffer.</span></span> <span data-ttu-id="f3009-164">默认值为256字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-164">The default is 256 bytes.</span></span> <span data-ttu-id="f3009-165">指定的值不应超过为`maxRequestLength`属性指定的值。</span><span class="sxs-lookup"><span data-stu-id="f3009-165">The value that you specify should not exceed the value that you specify for the `maxRequestLength` attribute.</span></span>  
  
<a name="using_the_FileUpload_Control_with_the_UpdatePanel_control"></a>   
## <a name="using-the-fileupload-control-with-the-updatepanel-control"></a><span data-ttu-id="f3009-166">将 FileUpload 控件与 UpdatePanel 控件一起使用</span><span class="sxs-lookup"><span data-stu-id="f3009-166">Using the FileUpload Control with the UpdatePanel Control</span></span>  
 <span data-ttu-id="f3009-167"><xref:System.Web.UI.WebControls.FileUpload>控件设计为仅用于回发方案, 而不是在部分页面呈现期间在异步回发方案中使用。</span><span class="sxs-lookup"><span data-stu-id="f3009-167">The <xref:System.Web.UI.WebControls.FileUpload> control is designed to be used only in postback scenarios and not in asynchronous postback scenarios during partial-page rendering.</span></span> <span data-ttu-id="f3009-168">在<xref:System.Web.UI.WebControls.FileUpload> 控件<xref:System.Web.UI.UpdatePanel>内使用控件时, 必须使用作为面板<xref:System.Web.UI.PostBackTrigger>对象的控件来上载该文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-168">When you use a <xref:System.Web.UI.WebControls.FileUpload> control inside an <xref:System.Web.UI.UpdatePanel> control, the file must be uploaded by using a control that is a <xref:System.Web.UI.PostBackTrigger> object for the panel.</span></span> <span data-ttu-id="f3009-169"><xref:System.Web.UI.UpdatePanel>控件用于更新页面的选定区域, 而不是使用回发来更新整个页面。</span><span class="sxs-lookup"><span data-stu-id="f3009-169"><xref:System.Web.UI.UpdatePanel> controls are used to update selected regions of a page instead of updating the whole page with a postback.</span></span> <span data-ttu-id="f3009-170">有关详细信息, 请参阅[UpdatePanel 控件概述](https://msdn.microsoft.com/library/29a2265d-9674-4c19-b70e-e5560ee9689a)和[部分页呈现概述](https://msdn.microsoft.com/library/5c12736d-d9e9-464a-9388-3fe0f9f49e49)。</span><span class="sxs-lookup"><span data-stu-id="f3009-170">For more information, see [UpdatePanel Control Overview](https://msdn.microsoft.com/library/29a2265d-9674-4c19-b70e-e5560ee9689a) and [Partial-Page Rendering Overview](https://msdn.microsoft.com/library/5c12736d-d9e9-464a-9388-3fe0f9f49e49).</span></span>  
  
<a name="DeclarativeSyntax"></a>   
## <a name="declarative-syntax"></a><span data-ttu-id="f3009-171">声明性语法</span><span class="sxs-lookup"><span data-stu-id="f3009-171">Declarative Syntax</span></span>  
  
```  
<asp:FileUpload  
    AccessKey="string"  
    BackColor="color name|#dddddd"  
    BorderColor="color name|#dddddd"  
    BorderStyle="NotSet|None|Dotted|Dashed|Solid|Double|Groove|Ridge|  
        Inset|Outset"  
    BorderWidth="size"  
    CssClass="string"  
    Enabled="True|False"  
    EnableTheming="True|False"  
    EnableViewState="True|False"  
    Font-Bold="True|False"  
    Font-Italic="True|False"  
    Font-Names="string"  
    Font-Overline="True|False"  
    Font-Size="string|Smaller|Larger|XX-Small|X-Small|Small|Medium|  
        Large|X-Large|XX-Large"  
    Font-Strikeout="True|False"  
    Font-Underline="True|False"  
    ForeColor="color name|#dddddd"  
    Height="size"  
    ID="string"  
    OnDataBinding="DataBinding event handler"  
    OnDisposed="Disposed event handler"  
    OnInit="Init event handler"  
    OnLoad="Load event handler"  
    OnPreRender="PreRender event handler"  
    OnUnload="Unload event handler"  
    runat="server"  
    SkinID="string"  
    Style="string"  
    TabIndex="integer"  
    ToolTip="string"  
    Visible="True|False"  
    Width="size"  
/>  
```  
  
   
  
## Examples  
 <span data-ttu-id="f3009-172">本主题提供了包含源代码的 Visual Studio 网站项目:[下载](https://go.microsoft.com/fwlink/?LinkId=191897)。</span><span class="sxs-lookup"><span data-stu-id="f3009-172">A Visual Studio Web site project with source code is available to accompany this topic: [Download](https://go.microsoft.com/fwlink/?LinkId=191897).</span></span>  
  
 <span data-ttu-id="f3009-173">本部分包含以下四个示例:</span><span class="sxs-lookup"><span data-stu-id="f3009-173">This section contains the following four examples:</span></span>  
  
-   <span data-ttu-id="f3009-174">第一个示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到在代码中指定的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-174">The first example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a path that is specified in code.</span></span>  
  
-   <span data-ttu-id="f3009-175">第二个示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>将文件保存到应用程序文件系统中指定目录的控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-175">The second example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a specified directory in the file system for the application.</span></span>  
  
-   <span data-ttu-id="f3009-176">第三个示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>将文件保存到指定路径的控件, 并限制可上载的文件的大小。</span><span class="sxs-lookup"><span data-stu-id="f3009-176">The third example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a specified path and limits the size of the file that can be uploaded.</span></span>  
  
-   <span data-ttu-id="f3009-177">第四个示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到指定的路径, 并只允许上传具有 .doc 或 .xls 文件扩展名的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-177">The fourth example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a specified path and allows only files that have the .doc or .xls file name extensions to be uploaded.</span></span>  
  
> [!CAUTION]
>  <span data-ttu-id="f3009-178">这些示例演示了<xref:System.Web.UI.WebControls.FileUpload>控件的基本语法, 但并不演示了在保存文件之前应完成的所有必要错误检查。</span><span class="sxs-lookup"><span data-stu-id="f3009-178">These examples demonstrate the basic syntax for the <xref:System.Web.UI.WebControls.FileUpload> control, but they do not demonstrate all the necessary error checking that should be completed before to saving the file.</span></span> <span data-ttu-id="f3009-179">有关更完整的示例，请参见 <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>。</span><span class="sxs-lookup"><span data-stu-id="f3009-179">For a more complete example, see <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>.</span></span>  
  
 <span data-ttu-id="f3009-180">下面的示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到在代码中指定的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-180">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a path that is specified in code.</span></span> <span data-ttu-id="f3009-181">调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法以将文件保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-181">The <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called to save the file to the specified path on the server.</span></span>  
  
 [!code-aspx-csharp[FileUploadClass1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadClass1/cs/fileuploadclass1cs.aspx#1)]
 [!code-aspx-vb[FileUploadClass1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadClass1/VB/fileuploadclass1vb.aspx#1)]  
  
 <span data-ttu-id="f3009-182">下面的示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到应用程序文件系统中的指定目录。</span><span class="sxs-lookup"><span data-stu-id="f3009-182">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a specified directory in the file system for the application.</span></span> <span data-ttu-id="f3009-183"><xref:System.Web.HttpRequest.PhysicalApplicationPath%2A?displayProperty=nameWithType>属性用于获取当前正在执行的服务器应用程序的根目录的物理文件系统路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-183">The <xref:System.Web.HttpRequest.PhysicalApplicationPath%2A?displayProperty=nameWithType> property is used to get the physical file system path of the root directory for the currently executing server application.</span></span> <span data-ttu-id="f3009-184">调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法以将文件保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-184">The <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called to save the file to the specified path on the server.</span></span>  
  
 [!code-aspx-csharp[FileUploadClass2#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadClass2/cs/fileuploadclass2cs.aspx#1)]
 [!code-aspx-vb[FileUploadClass2#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadClass2/VB/fileuploadclass2vb.aspx#1)]  
  
 <span data-ttu-id="f3009-185">下面的示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到代码中指定的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-185">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a path that is specified in the code.</span></span> <span data-ttu-id="f3009-186">控件限制可上传到 2 MB 的文件的大小。</span><span class="sxs-lookup"><span data-stu-id="f3009-186">The control limits the size of the file that can be uploaded to 2 MB.</span></span> <span data-ttu-id="f3009-187">属性用于访问基础<xref:System.Web.HttpPostedFile.ContentLength%2A>属性并返回文件的大小。 <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-187">The <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property is used to access the underlying <xref:System.Web.HttpPostedFile.ContentLength%2A> property and return the size of the file.</span></span> <span data-ttu-id="f3009-188">如果要上传的文件的大小小于 2 MB, <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>则调用方法以将文件保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-188">If the size of the file to upload is less than 2 MB, the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called to save the file to the specified path on the server.</span></span> <span data-ttu-id="f3009-189">除了在应用程序代码中检查 "最大文件大小" 设置, 还可以将`maxRequestLength` [httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369)元素的属性设置为应用程序配置文件中允许的最大大小。</span><span class="sxs-lookup"><span data-stu-id="f3009-189">In addition to checking for the maximum file size setting in your application code, you can set the `maxRequestLength` attribute of the [httpRuntime](https://msdn.microsoft.com/library/e9b81350-8aaf-47cc-9843-5f7d0c59f369) element to a maximum allowable size in the configuration file for your application.</span></span>  
  
 [!code-aspx-csharp[FileUploadClass3#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadClass3/cs/fileuploadclass3cs.aspx#1)]
 [!code-aspx-vb[FileUploadClass3#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadClass3/VB/fileuploadclass3vb.aspx#1)]  
  
 <span data-ttu-id="f3009-190">下面的示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到代码中指定的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-190">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a path that is specified in the code.</span></span> <span data-ttu-id="f3009-191">此示例只允许上传具有 .doc 或 .xls 文件扩展名的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-191">This example allows only files that have the .doc or .xls file name extensions to be uploaded.</span></span> <span data-ttu-id="f3009-192">调用<xref:System.IO.Path.GetExtension%2A?displayProperty=nameWithType>方法以返回要上传的文件的扩展名。</span><span class="sxs-lookup"><span data-stu-id="f3009-192">The <xref:System.IO.Path.GetExtension%2A?displayProperty=nameWithType> method is called to return the extension of the file to upload.</span></span> <span data-ttu-id="f3009-193">如果该文件的文件扩展名为 .doc 或 .xls, <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>则调用方法将该文件保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-193">If the file has a .doc or .xls file name extension, the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called to save the file to the specified path on the server.</span></span>  
  
 [!code-aspx-csharp[FileUploadClass4#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadClass4/cs/fileuploadclass4cs.aspx#1)]
 [!code-aspx-vb[FileUploadClass4#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadClass4/VB/fileuploadclass4vb.aspx#1)]  
  
 ]]></format>
    </remarks>
    <altmember cref="M:System.Web.UI.WebControls.FileUpload.SaveAs(System.String)" />
  </Docs>
  <Members>
    <Member MemberName=".ctor">
      <MemberSignature Language="C#" Value="public FileUpload ();" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig specialname rtspecialname instance void .ctor() cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.FileUpload.#ctor" />
      <MemberSignature Language="VB.NET" Value="Public Sub New ()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; FileUpload();" />
      <MemberType>Constructor</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Parameters />
      <Docs>
        <summary><span data-ttu-id="f3009-194">初始化 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 类的新实例。</span><span class="sxs-lookup"><span data-stu-id="f3009-194">Initializes a new instance of the <see cref="T:System.Web.UI.WebControls.FileUpload" /> class.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-195">使用构造函数初始化<xref:System.Web.UI.WebControls.FileUpload>类的新实例。 <xref:System.Web.UI.WebControls.FileUpload.%23ctor%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-195">Use the <xref:System.Web.UI.WebControls.FileUpload.%23ctor%2A> constructor to initialize a new instance of the <xref:System.Web.UI.WebControls.FileUpload> class.</span></span> <span data-ttu-id="f3009-196">用户<xref:System.Web.UI.WebControls.FileUpload>选择要上载的文件后, 控件不会自动将文件保存到服务器。</span><span class="sxs-lookup"><span data-stu-id="f3009-196">The <xref:System.Web.UI.WebControls.FileUpload> control does not automatically save a file to the server after the user selects the file to upload.</span></span> <span data-ttu-id="f3009-197">您必须显式提供一个控件或机制以允许用户提交指定的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-197">You must explicitly provide a control or mechanism to allow the user to submit the specified file.</span></span> <span data-ttu-id="f3009-198">例如, 你可以提供一个按钮, 用户单击它即可上传文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-198">For example, you can provide a button that the user clicks to upload the file.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-199">下面的示例演示如何初始化<xref:System.Web.UI.WebControls.FileUpload>类的新实例。</span><span class="sxs-lookup"><span data-stu-id="f3009-199">The following example demonstrates how to initialize a new instance of the <xref:System.Web.UI.WebControls.FileUpload> class.</span></span> <span data-ttu-id="f3009-200">请注意, 此示例演示了构造函数语法, 但在创建后不会向控件添加功能。</span><span class="sxs-lookup"><span data-stu-id="f3009-200">Note that this example demonstrates the constructor syntax but does not add functionality to the control after it is created.</span></span>  
  
 <span data-ttu-id="f3009-201">此示例是为<xref:System.Web.UI.WebControls.FileUpload>类提供的更大示例的一部分。</span><span class="sxs-lookup"><span data-stu-id="f3009-201">This example is part of a larger example provided for the <xref:System.Web.UI.WebControls.FileUpload> class.</span></span>  
  
 [!code-aspx-vb[FileUploadCstr#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadCstr/VB/fileuploadcstrvb.aspx#1)]  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="AddAttributesToRender">
      <MemberSignature Language="C#" Value="protected override void AddAttributesToRender (System.Web.UI.HtmlTextWriter writer);" />
      <MemberSignature Language="ILAsm" Value=".method familyhidebysig virtual instance void AddAttributesToRender(class System.Web.UI.HtmlTextWriter writer) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.FileUpload.AddAttributesToRender(System.Web.UI.HtmlTextWriter)" />
      <MemberSignature Language="VB.NET" Value="Protected Overrides Sub AddAttributesToRender (writer As HtmlTextWriter)" />
      <MemberSignature Language="C++ CLI" Value="protected:&#xA; override void AddAttributesToRender(System::Web::UI::HtmlTextWriter ^ writer);" />
      <MemberSignature Language="F#" Value="override this.AddAttributesToRender : System.Web.UI.HtmlTextWriter -&gt; unit" Usage="fileUpload.AddAttributesToRender writer" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="writer" Type="System.Web.UI.HtmlTextWriter" />
      </Parameters>
      <Docs>
        <param name="writer"><span data-ttu-id="f3009-202">表示在客户端上呈现 HTML 内容的输出流的 <see cref="T:System.Web.UI.HtmlTextWriter" />。</span><span class="sxs-lookup"><span data-stu-id="f3009-202">An <see cref="T:System.Web.UI.HtmlTextWriter" /> that represents the output stream to render HTML content on the client.</span></span></param>
        <summary><span data-ttu-id="f3009-203">为指定的 <see cref="T:System.Web.UI.HtmlTextWriter" /> 对象添加 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件的 HTML 特性和样式，以在呈现内容时使用它们。</span><span class="sxs-lookup"><span data-stu-id="f3009-203">Adds the HTML attributes and styles of a <see cref="T:System.Web.UI.WebControls.FileUpload" /> control to render to the specified <see cref="T:System.Web.UI.HtmlTextWriter" /> object.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-204">此<xref:System.Web.UI.WebControls.FileUpload.AddAttributesToRender%2A>方法主要由控件开发人员用来将适当的特性和样式插入<xref:System.Web.UI.WebControls.FileUpload>控件<xref:System.Web.UI.HtmlTextWriter?displayProperty=nameWithType>的输出流中。</span><span class="sxs-lookup"><span data-stu-id="f3009-204">The <xref:System.Web.UI.WebControls.FileUpload.AddAttributesToRender%2A> method is primarily used by control developers to insert the appropriate attributes and styles to the <xref:System.Web.UI.HtmlTextWriter?displayProperty=nameWithType> output stream for a <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-205">方法<xref:System.Web.UI.WebControls.FileUpload.AddAttributesToRender%2A> 将<xref:System.Web.UI.WebControls.WebControl.AddAttributesToRender%2A?displayProperty=nameWithType>重写方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-205">The <xref:System.Web.UI.WebControls.FileUpload.AddAttributesToRender%2A> method overrides the <xref:System.Web.UI.WebControls.WebControl.AddAttributesToRender%2A?displayProperty=nameWithType> method.</span></span>  
  
 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.UI.HtmlTextWriter" />
        <altmember cref="M:System.Web.UI.WebControls.WebControl.AddAttributesToRender(System.Web.UI.HtmlTextWriter)" />
      </Docs>
    </Member>
    <Member MemberName="AllowMultiple">
      <MemberSignature Language="C#" Value="public virtual bool AllowMultiple { get; set; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool AllowMultiple" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.AllowMultiple" />
      <MemberSignature Language="VB.NET" Value="Public Overridable Property AllowMultiple As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; virtual property bool AllowMultiple { bool get(); void set(bool value); };" />
      <MemberSignature Language="F#" Value="member this.AllowMultiple : bool with get, set" Usage="System.Web.UI.WebControls.FileUpload.AllowMultiple" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(true)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.DefaultValue(false)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-206">获取或设置指定是否可选择多个文件用于上载的值。</span><span class="sxs-lookup"><span data-stu-id="f3009-206">Gets or sets a value that specifies whether multiple files can be selected for upload.</span></span></summary>
        <value><span data-ttu-id="f3009-207">如果可以选定多个文件，则为 <see langword="true" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="f3009-207"><see langword="true" /> if multiple files can be selected; otherwise, <see langword="false" />.</span></span></value>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="FileBytes">
      <MemberSignature Language="C#" Value="public byte[] FileBytes { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance unsigned int8[] FileBytes" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.FileBytes" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property FileBytes As Byte()" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property cli::array &lt;System::Byte&gt; ^ FileBytes { cli::array &lt;System::Byte&gt; ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.FileBytes : byte[]" Usage="System.Web.UI.WebControls.FileUpload.FileBytes" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.Bindable(true)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Byte[]</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-208">从使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件指定的文件中获取一个字节数组。</span><span class="sxs-lookup"><span data-stu-id="f3009-208">Gets an array of the bytes in a file that is specified by using a <see cref="T:System.Web.UI.WebControls.FileUpload" /> control.</span></span></summary>
        <value><span data-ttu-id="f3009-209"><see cref="T:System.Byte" /> 数组，包含指定文件的内容。</span><span class="sxs-lookup"><span data-stu-id="f3009-209">A <see cref="T:System.Byte" /> array that contains the contents of the specified file.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-210"><xref:System.Web.UI.WebControls.FileUpload>控件不会从客户端自动读取文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-210">The <xref:System.Web.UI.WebControls.FileUpload> control does not automatically read the file from the client.</span></span> <span data-ttu-id="f3009-211">您必须显式提供一个控件或机制以允许用户提交指定的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-211">You must explicitly provide a control or mechanism to allow the user to submit the specified file.</span></span> <span data-ttu-id="f3009-212">例如, 你可以提供一个按钮, 用户可以单击该按钮来上传文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-212">For example, you can provide a button that the user can click to upload the file.</span></span> <span data-ttu-id="f3009-213">你编写的用于保存指定文件的代码可以调用<xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A>属性, 该属性将返回文件的内容。</span><span class="sxs-lookup"><span data-stu-id="f3009-213">The code that you write to save the specified file could call the <xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A> property, which returns the contents of the file.</span></span>  
  
 <span data-ttu-id="f3009-214">在调用<xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A>属性之前, 应<xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>使用<xref:System.Web.UI.WebControls.FileUpload>属性来验证控件是否包含要上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-214">Before calling the <xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A> property, you should use the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> property to verify that the <xref:System.Web.UI.WebControls.FileUpload> control contains a file to upload.</span></span> <span data-ttu-id="f3009-215"><xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>如果返回`true`, 则调用<xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="f3009-215">If the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> returns `true`, call the <xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A> property.</span></span> <span data-ttu-id="f3009-216">如果它返回`false`, 则向用户显示一条消息, 指示该控件不包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-216">If it returns `false`, display a message to the user indicating that the control does not contain a file.</span></span> <span data-ttu-id="f3009-217">如果未提供错误处理代码来验证文件是否存在, 则尝试保存不<xref:System.Web.HttpException>存在的文件会引发异常。</span><span class="sxs-lookup"><span data-stu-id="f3009-217">If you do not provide error-handling code to verify that a file exists, an attempt to save a nonexistent file throws an <xref:System.Web.HttpException> exception.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-218">下面的示例演示如何创建<xref:System.Web.UI.WebControls.FileUpload>控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-218">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-219">当用户单击 "**上传文件**" 按钮时, 该文件的内容将在页面的文本框中显示为字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-219">When the user clicks the **Upload file** button, the contents of the file are displayed as bytes in a text box on the page.</span></span> <span data-ttu-id="f3009-220">此示例使用<xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A>属性上传整个文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-220">This example uses the <xref:System.Web.UI.WebControls.FileUpload.FileBytes%2A> property to upload the entire file.</span></span>  
  
 [!code-aspx-csharp[FileUploadFileBytes#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadFileBytes/CS/FileUploadFileBytesCS.aspx#1)]
 [!code-aspx-vb[FileUploadFileBytes#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadFileBytes/VB/FileUploadFileBytesVB.aspx#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Web.HttpException"><span data-ttu-id="f3009-221">未读取整个文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-221">The entire file was not read.</span></span></exception>
        <altmember cref="P:System.Web.UI.WebControls.FileUpload.HasFile" />
      </Docs>
    </Member>
    <Member MemberName="FileContent">
      <MemberSignature Language="C#" Value="public System.IO.Stream FileContent { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.IO.Stream FileContent" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.FileContent" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property FileContent As Stream" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::IO::Stream ^ FileContent { System::IO::Stream ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.FileContent : System.IO.Stream" Usage="System.Web.UI.WebControls.FileUpload.FileContent" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.IO.Stream</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-222">获取 <see cref="T:System.IO.Stream" /> 对象，它指向要使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-222">Gets a <see cref="T:System.IO.Stream" /> object that points to a file to upload using the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control.</span></span></summary>
        <value><span data-ttu-id="f3009-223"><see cref="T:System.IO.Stream" />，指向使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-223">A <see cref="T:System.IO.Stream" /> that points to a file to upload using the <see cref="T:System.Web.UI.WebControls.FileUpload" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-224">属性获取一个<xref:System.IO.Stream>对象, 该对象指向<xref:System.Web.UI.WebControls.FileUpload>要使用控件上载的文件。 <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-224">The <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property gets a <xref:System.IO.Stream> object that points to a file to upload by using the <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-225"><xref:System.Web.UI.WebControls.FileUpload.FileContent%2A>使用属性访问该文件的内容。</span><span class="sxs-lookup"><span data-stu-id="f3009-225">Use the <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property to access the contents of the file.</span></span> <span data-ttu-id="f3009-226">例如, 你可以使用<xref:System.IO.Stream>此属性返回的对象将文件内容作为字节读取, 并将其存储在字节数组中。</span><span class="sxs-lookup"><span data-stu-id="f3009-226">For example, you can use the <xref:System.IO.Stream> object that is returned by this property to read the contents of the file as bytes and store them in a byte array.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-227">下面的示例演示如何创建<xref:System.Web.UI.WebControls.FileUpload>控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-227">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-228"><xref:System.Web.UI.WebControls.FileUpload.FileContent%2A>属性用于将文件的内容读入字节数组。</span><span class="sxs-lookup"><span data-stu-id="f3009-228">The <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property is used to read the contents of the file into a byte array.</span></span> <span data-ttu-id="f3009-229">当用户单击 "**上传文件**" 按钮时, 该文件的内容将在页面的文本框中显示为字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-229">When the user clicks the **Upload file** button, the contents of the file are displayed as bytes in a text box on the page.</span></span>  
  
 [!code-aspx-csharp[FileUpload.FileContent#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUpload.FileContent/cs/fileupload.filecontentcs.aspx#1)]
 [!code-aspx-vb[FileUpload.FileContent#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUpload.FileContent/VB/fileupload.filecontentvb.aspx#1)]  
  
 ]]></format>
        </remarks>
        <altmember cref="T:System.IO.Stream" />
        <altmember cref="M:System.Web.UI.WebControls.FileUpload.SaveAs(System.String)" />
      </Docs>
    </Member>
    <Member MemberName="FileName">
      <MemberSignature Language="C#" Value="public string FileName { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance string FileName" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.FileName" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property FileName As String" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::String ^ FileName { System::String ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.FileName : string" Usage="System.Web.UI.WebControls.FileUpload.FileName" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.String</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-230">获取客户端上使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件上载的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="f3009-230">Gets the name of a file on a client to upload using the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control.</span></span></summary>
        <value><span data-ttu-id="f3009-231">该字符串指定客户端上使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 上载的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="f3009-231">A string that specifies the name of a file on a client to upload using the <see cref="T:System.Web.UI.WebControls.FileUpload" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-232">获取客户端上使用 <xref:System.Web.UI.WebControls.FileUpload> 控件上载的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="f3009-232">Gets the name of a file on a client to upload using the <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-233"><xref:System.Web.UI.WebControls.FileUpload.FileName%2A>属性返回的文件名不包括客户端上文件的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-233">The file name that the <xref:System.Web.UI.WebControls.FileUpload.FileName%2A> property returns does not include the path of the file on the client.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-234">下面的示例演示如何创建一个<xref:System.Web.UI.WebControls.FileUpload>控件, 该控件将文件保存到在代码中指定的路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-234">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that saves files to a path that is specified in code.</span></span> <span data-ttu-id="f3009-235"><xref:System.Web.UI.WebControls.FileUpload.FileName%2A>属性用于获取要上传的文件的名称。</span><span class="sxs-lookup"><span data-stu-id="f3009-235">The <xref:System.Web.UI.WebControls.FileUpload.FileName%2A> property is used to get the name of the file to upload.</span></span> <span data-ttu-id="f3009-236">调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法以将文件保存到服务器上指定的路径, 并使用该文件在客户端上的相同名称。</span><span class="sxs-lookup"><span data-stu-id="f3009-236">The <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called to save the file to the specified path on the server, using the same name the file has on the client.</span></span> <span data-ttu-id="f3009-237">请注意, 此示例演示此控件的基本语法, 但并不演示在保存文件之前应完成的所有必要错误检查。</span><span class="sxs-lookup"><span data-stu-id="f3009-237">Note that this example demonstrates the basic syntax for this control, but does not demonstrate all the necessary error checking that should be done before saving the file.</span></span> <span data-ttu-id="f3009-238">有关更完整的示例，请参见 <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>。</span><span class="sxs-lookup"><span data-stu-id="f3009-238">For a more complete example, see <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>.</span></span>  
  
 [!code-aspx-csharp[FileUploadClass1#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUploadClass1/cs/fileuploadclass1cs.aspx#1)]
 [!code-aspx-vb[FileUploadClass1#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUploadClass1/VB/fileuploadclass1vb.aspx#1)]  
  
 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.FileUpload.SaveAs(System.String)" />
      </Docs>
    </Member>
    <Member MemberName="HasFile">
      <MemberSignature Language="C#" Value="public bool HasFile { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool HasFile" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.HasFile" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property HasFile As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool HasFile { bool get(); };" />
      <MemberSignature Language="F#" Value="member this.HasFile : bool" Usage="System.Web.UI.WebControls.FileUpload.HasFile" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-239">获取一个值，该值指示 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件是否包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-239">Gets a value indicating whether the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control contains a file.</span></span></summary>
        <value><span data-ttu-id="f3009-240">如果 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 包含文件，则为 <see langword="true" />；否则为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="f3009-240"><see langword="true" /> if the <see cref="T:System.Web.UI.WebControls.FileUpload" /> contains a file; otherwise, <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-241">属性获取一个值, 该值指示<xref:System.Web.UI.WebControls.FileUpload>控件是否包含要上载的文件。 <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-241">The <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> property gets a value indicating whether the <xref:System.Web.UI.WebControls.FileUpload> control contains a file to upload.</span></span> <span data-ttu-id="f3009-242">使用此属性验证在对文件执行操作之前是否存在要上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-242">Use this property to verify that a file to upload exists before performing operations on the file.</span></span> <span data-ttu-id="f3009-243">例如, 在调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法以将文件保存到磁盘之前, 请<xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>使用属性来验证该文件是否存在。</span><span class="sxs-lookup"><span data-stu-id="f3009-243">For example, before calling the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method to save the file to disk, use the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> property to verify that the file exists.</span></span> <span data-ttu-id="f3009-244">如果<xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>返回`true`, 则调用方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-244">If <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> returns `true`, call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method.</span></span> <span data-ttu-id="f3009-245">如果它返回`false`, 则向用户显示一条消息, 指示该控件不包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-245">If it returns `false`, display a message to the user indicating that the control does not contain a file.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-246">下面的示例演示如何创建<xref:System.Web.UI.WebControls.FileUpload>执行错误检查的控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-246">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that performs error checking.</span></span> <span data-ttu-id="f3009-247">在保存文件之前, <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>调用方法以验证控件是否包含要上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-247">Before saving the file, the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> method is called to verify that the control contains a file to upload.</span></span> <span data-ttu-id="f3009-248">此外, <xref:System.IO.File.Exists%2A?displayProperty=nameWithType>调用方法以检查路径中是否已存在同名的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-248">In addition, the <xref:System.IO.File.Exists%2A?displayProperty=nameWithType> method is called to check whether a file with the same name already occurs in the path.</span></span> <span data-ttu-id="f3009-249">如果是这样, 则在调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法之前, 要上传的文件的名称以下划线字符为前缀。</span><span class="sxs-lookup"><span data-stu-id="f3009-249">If it does, the name of the file to upload is prefixed with an underscore character before the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called.</span></span> <span data-ttu-id="f3009-250">这可以防止覆盖现有文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-250">This prevents the existing file from being overwritten.</span></span>  
  
 [!code-aspx-csharp[FileUpload.SaveAs#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUpload.SaveAs/cs/fileupload.saveascs.aspx#1)]
 [!code-aspx-vb[FileUpload.SaveAs#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUpload.SaveAs/VB/fileupload.saveasvb.aspx#1)]  
  
 ]]></format>
        </remarks>
        <altmember cref="M:System.Web.UI.WebControls.FileUpload.SaveAs(System.String)" />
      </Docs>
    </Member>
    <Member MemberName="HasFiles">
      <MemberSignature Language="C#" Value="public bool HasFiles { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance bool HasFiles" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.HasFiles" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property HasFiles As Boolean" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property bool HasFiles { bool get(); };" />
      <MemberSignature Language="F#" Value="member this.HasFiles : bool" Usage="System.Web.UI.WebControls.FileUpload.HasFiles" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Boolean</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-251">获取指示所有未见是否已经被上传的值。</span><span class="sxs-lookup"><span data-stu-id="f3009-251">Gets a value that indicates whether any files have been uploaded.</span></span></summary>
        <value><span data-ttu-id="f3009-252">如果上载任何文件中，则为<see langword="true" />；否则，为 <see langword="false" />。</span><span class="sxs-lookup"><span data-stu-id="f3009-252"><see langword="true" /> if any files have been uploaded; otherwise, <see langword="false" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-253">如果上传了`false`空文件, 此方法也会返回。</span><span class="sxs-lookup"><span data-stu-id="f3009-253">This method also returns `false` if an empty file (zero bytes) is uploaded.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="OnPreRender">
      <MemberSignature Language="C#" Value="protected internal override void OnPreRender (EventArgs e);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void OnPreRender(class System.EventArgs e) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.FileUpload.OnPreRender(System.EventArgs)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub OnPreRender (e As EventArgs)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void OnPreRender(EventArgs ^ e);" />
      <MemberSignature Language="F#" Value="override this.OnPreRender : EventArgs -&gt; unit" Usage="fileUpload.OnPreRender e" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="e" Type="System.EventArgs" />
      </Parameters>
      <Docs>
        <param name="e"><span data-ttu-id="f3009-254">包含事件数据的 <see cref="T:System.EventArgs" /> 对象。</span><span class="sxs-lookup"><span data-stu-id="f3009-254">An <see cref="T:System.EventArgs" /> object that contains the event data.</span></span></param>
        <summary><span data-ttu-id="f3009-255">为 <see cref="E:System.Web.UI.Control.PreRender" /> 控件引发 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 事件。</span><span class="sxs-lookup"><span data-stu-id="f3009-255">Raises the <see cref="E:System.Web.UI.Control.PreRender" /> event for the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-256"><xref:System.Web.UI.WebControls.FileUpload.OnPreRender%2A> 方法<xref:System.Web.UI.WebControls.FileUpload>通知控件在保存视图状态和呈现内容之前执行任何必需的预呈现步骤。</span><span class="sxs-lookup"><span data-stu-id="f3009-256">The <xref:System.Web.UI.WebControls.FileUpload.OnPreRender%2A> method notifies the <xref:System.Web.UI.WebControls.FileUpload> control to perform any necessary pre-rendering steps before saving view state and rendering content.</span></span>  
  
 ]]></format>
        </remarks>
      </Docs>
    </Member>
    <Member MemberName="PostedFile">
      <MemberSignature Language="C#" Value="public System.Web.HttpPostedFile PostedFile { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Web.HttpPostedFile PostedFile" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.PostedFile" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property PostedFile As HttpPostedFile" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Web::HttpPostedFile ^ PostedFile { System::Web::HttpPostedFile ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.PostedFile : System.Web.HttpPostedFile" Usage="System.Web.UI.WebControls.FileUpload.PostedFile" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute>
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute>
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Web.HttpPostedFile</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-257">获取使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件上载的文件的基础 <see cref="T:System.Web.HttpPostedFile" /> 对象。</span><span class="sxs-lookup"><span data-stu-id="f3009-257">Gets the underlying <see cref="T:System.Web.HttpPostedFile" /> object for a file that is uploaded by using the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control.</span></span></summary>
        <value><span data-ttu-id="f3009-258">使用 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 上载的文件的 <see cref="T:System.Web.HttpPostedFile" />。</span><span class="sxs-lookup"><span data-stu-id="f3009-258">An <see cref="T:System.Web.HttpPostedFile" /> for a file uploaded by using the <see cref="T:System.Web.UI.WebControls.FileUpload" />.</span></span></value>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-259">属性获取<xref:System.Web.HttpPostedFile> 使用<xref:System.Web.UI.WebControls.FileUpload>控件上载的文件的基础对象。 <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-259">The <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property gets the underlying <xref:System.Web.HttpPostedFile> object for a file that is uploaded by using the <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-260">使用此属性可以访问上载的文件上的其他属性。</span><span class="sxs-lookup"><span data-stu-id="f3009-260">Use this property to access additional properties on the uploaded file.</span></span>  
  
 <span data-ttu-id="f3009-261">您可以使用<xref:System.Web.HttpPostedFile.ContentLength%2A>属性来获取文件的长度。</span><span class="sxs-lookup"><span data-stu-id="f3009-261">You can use the <xref:System.Web.HttpPostedFile.ContentLength%2A> property to get the length of the file.</span></span> <span data-ttu-id="f3009-262">您可以使用<xref:System.Web.HttpPostedFile.ContentType%2A>属性来获取文件的 MIME 内容类型。</span><span class="sxs-lookup"><span data-stu-id="f3009-262">You can use the <xref:System.Web.HttpPostedFile.ContentType%2A> property to get the MIME content type of the file.</span></span> <span data-ttu-id="f3009-263">此外, <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A>还可以使用属性来<xref:System.Web.HttpPostedFile.FileName%2A>访问属性、 <xref:System.Web.HttpPostedFile.InputStream%2A>属性和<xref:System.Web.HttpPostedFile.SaveAs%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-263">In addition, you can use the <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property to access the <xref:System.Web.HttpPostedFile.FileName%2A> property, the <xref:System.Web.HttpPostedFile.InputStream%2A> property, and the <xref:System.Web.HttpPostedFile.SaveAs%2A> method.</span></span> <span data-ttu-id="f3009-264">但是, <xref:System.Web.UI.WebControls.FileUpload.FileName%2A>属性<xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> 、属性和<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法提供了相同的功能。</span><span class="sxs-lookup"><span data-stu-id="f3009-264">However, the same functionality is provided by the <xref:System.Web.UI.WebControls.FileUpload.FileName%2A> property, the <xref:System.Web.UI.WebControls.FileUpload.FileContent%2A> property, and the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method.</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-265">下面的示例演示如何创建<xref:System.Web.UI.WebControls.FileUpload>控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-265">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control.</span></span> <span data-ttu-id="f3009-266">当用户单击 "**上传文件**" 按钮时, 该文件的内容将在页面的文本框中显示为字节。</span><span class="sxs-lookup"><span data-stu-id="f3009-266">When the user clicks the **Upload file** button, the contents of the file are displayed as bytes in a text box on the page.</span></span> <span data-ttu-id="f3009-267">此示例使用<xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A>属性<xref:System.Web.HttpPostedFile.ContentLength%2A?displayProperty=nameWithType>访问属性。</span><span class="sxs-lookup"><span data-stu-id="f3009-267">This example uses the <xref:System.Web.UI.WebControls.FileUpload.PostedFile%2A> property to access the <xref:System.Web.HttpPostedFile.ContentLength%2A?displayProperty=nameWithType> property.</span></span> <span data-ttu-id="f3009-268"><xref:System.Web.HttpPostedFile.ContentLength%2A>属性用于确定文件的长度, 然后将文件内容复制到字节数组。</span><span class="sxs-lookup"><span data-stu-id="f3009-268">The <xref:System.Web.HttpPostedFile.ContentLength%2A> property is used to determine the length of the file before copying the file contents to a byte array.</span></span>  
  
 [!code-aspx-csharp[FileUpload.FileContent#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUpload.FileContent/cs/fileupload.filecontentcs.aspx#1)]
 [!code-aspx-vb[FileUpload.FileContent#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUpload.FileContent/VB/fileupload.filecontentvb.aspx#1)]  
  
 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.HttpPostedFile" />
      </Docs>
    </Member>
    <Member MemberName="PostedFiles">
      <MemberSignature Language="C#" Value="public System.Collections.Generic.IList&lt;System.Web.HttpPostedFile&gt; PostedFiles { get; }" />
      <MemberSignature Language="ILAsm" Value=".property instance class System.Collections.Generic.IList`1&lt;class System.Web.HttpPostedFile&gt; PostedFiles" />
      <MemberSignature Language="DocId" Value="P:System.Web.UI.WebControls.FileUpload.PostedFiles" />
      <MemberSignature Language="VB.NET" Value="Public ReadOnly Property PostedFiles As IList(Of HttpPostedFile)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; property System::Collections::Generic::IList&lt;System::Web::HttpPostedFile ^&gt; ^ PostedFiles { System::Collections::Generic::IList&lt;System::Web::HttpPostedFile ^&gt; ^ get(); };" />
      <MemberSignature Language="F#" Value="member this.PostedFiles : System.Collections.Generic.IList&lt;System.Web.HttpPostedFile&gt;" Usage="System.Web.UI.WebControls.FileUpload.PostedFiles" />
      <MemberType>Property</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <Attributes>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.Browsable(false)</AttributeName>
        </Attribute>
        <Attribute FrameworkAlternate="netframework-4.5;netframework-4.5.1;netframework-4.5.2;netframework-4.6;netframework-4.6.1;netframework-4.6.2;netframework-4.7;netframework-4.7.1;netframework-4.7.2;netframework-4.8">
          <AttributeName>System.ComponentModel.DesignerSerializationVisibility(System.ComponentModel.DesignerSerializationVisibility.Hidden)</AttributeName>
        </Attribute>
      </Attributes>
      <ReturnValue>
        <ReturnType>System.Collections.Generic.IList&lt;System.Web.HttpPostedFile&gt;</ReturnType>
      </ReturnValue>
      <Docs>
        <summary><span data-ttu-id="f3009-269">获取已上载文件的集合。</span><span class="sxs-lookup"><span data-stu-id="f3009-269">Gets the collection of uploaded files.</span></span></summary>
        <value><span data-ttu-id="f3009-270">上载的文件集合。</span><span class="sxs-lookup"><span data-stu-id="f3009-270">The collection of uploaded files.</span></span></value>
        <remarks>To be added.</remarks>
      </Docs>
    </Member>
    <Member MemberName="Render">
      <MemberSignature Language="C#" Value="protected internal override void Render (System.Web.UI.HtmlTextWriter writer);" />
      <MemberSignature Language="ILAsm" Value=".method familyorassemblyhidebysig virtual instance void Render(class System.Web.UI.HtmlTextWriter writer) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.FileUpload.Render(System.Web.UI.HtmlTextWriter)" />
      <MemberSignature Language="VB.NET" Value="Protected Friend Overrides Sub Render (writer As HtmlTextWriter)" />
      <MemberSignature Language="C++ CLI" Value="protected public:&#xA; override void Render(System::Web::UI::HtmlTextWriter ^ writer);" />
      <MemberSignature Language="F#" Value="override this.Render : System.Web.UI.HtmlTextWriter -&gt; unit" Usage="fileUpload.Render writer" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="writer" Type="System.Web.UI.HtmlTextWriter" />
      </Parameters>
      <Docs>
        <param name="writer"><span data-ttu-id="f3009-271">接收 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件内容的 <see cref="T:System.Web.UI.HtmlTextWriter" /> 对象。</span><span class="sxs-lookup"><span data-stu-id="f3009-271">The <see cref="T:System.Web.UI.HtmlTextWriter" /> object that receives the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control content.</span></span></param>
        <summary><span data-ttu-id="f3009-272">将 <see cref="T:System.Web.UI.WebControls.FileUpload" /> 控件内容发送到指定的 <see cref="T:System.Web.UI.HtmlTextWriter" /> 对象，该对象编写相应内容以便呈现在客户端。</span><span class="sxs-lookup"><span data-stu-id="f3009-272">Sends the <see cref="T:System.Web.UI.WebControls.FileUpload" /> control content to the specified <see cref="T:System.Web.UI.HtmlTextWriter" /> object, which writes the content to render on the client.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-273">方法将控件内容发送到指定<xref:System.Web.UI.HtmlTextWriter?displayProperty=nameWithType>的对象, 该对象写入要在客户端上呈现的内容。 <xref:System.Web.UI.WebControls.FileUpload> <xref:System.Web.UI.WebControls.FileUpload.Render%2A></span><span class="sxs-lookup"><span data-stu-id="f3009-273">The <xref:System.Web.UI.WebControls.FileUpload.Render%2A> method sends the <xref:System.Web.UI.WebControls.FileUpload> control content to the specified <xref:System.Web.UI.HtmlTextWriter?displayProperty=nameWithType> object, which writes the content to render on the client.</span></span>  
  
 ]]></format>
        </remarks>
        <altmember cref="T:System.Web.UI.HtmlTextWriter" />
      </Docs>
    </Member>
    <Member MemberName="SaveAs">
      <MemberSignature Language="C#" Value="public void SaveAs (string filename);" />
      <MemberSignature Language="ILAsm" Value=".method public hidebysig instance void SaveAs(string filename) cil managed" />
      <MemberSignature Language="DocId" Value="M:System.Web.UI.WebControls.FileUpload.SaveAs(System.String)" />
      <MemberSignature Language="VB.NET" Value="Public Sub SaveAs (filename As String)" />
      <MemberSignature Language="C++ CLI" Value="public:&#xA; void SaveAs(System::String ^ filename);" />
      <MemberSignature Language="F#" Value="member this.SaveAs : string -&gt; unit" Usage="fileUpload.SaveAs filename" />
      <MemberType>Method</MemberType>
      <AssemblyInfo>
        <AssemblyName>System.Web</AssemblyName>
        <AssemblyVersion>2.0.0.0</AssemblyVersion>
        <AssemblyVersion>4.0.0.0</AssemblyVersion>
      </AssemblyInfo>
      <ReturnValue>
        <ReturnType>System.Void</ReturnType>
      </ReturnValue>
      <Parameters>
        <Parameter Name="filename" Type="System.String" />
      </Parameters>
      <Docs>
        <param name="filename"><span data-ttu-id="f3009-274">一个字符串，指定服务器上用于保存上载文件的位置的完整路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-274">A string that specifies the full path of the location of the server on which to save the uploaded file.</span></span></param>
        <summary><span data-ttu-id="f3009-275">将上载文件的内容保存到 Web 服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-275">Saves the contents of an uploaded file to a specified path on the Web server.</span></span></summary>
        <remarks>
          <format type="text/markdown"><![CDATA[  
  
## Remarks  
 <span data-ttu-id="f3009-276"><xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法将上载文件的内容保存到 Web 服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-276">The <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method saves the contents of an uploaded file to a specified path on the Web server.</span></span>  
  
 <span data-ttu-id="f3009-277">用户<xref:System.Web.UI.WebControls.FileUpload>选择要上载的文件后, 控件不会自动将文件保存到服务器。</span><span class="sxs-lookup"><span data-stu-id="f3009-277">The <xref:System.Web.UI.WebControls.FileUpload> control does not automatically save a file to the server after the user selects the file to upload.</span></span> <span data-ttu-id="f3009-278">您必须显式提供一个控件或机制以允许用户提交指定的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-278">You must explicitly provide a control or mechanism to allow the user to submit the specified file.</span></span> <span data-ttu-id="f3009-279">例如, 你可以提供一个按钮, 用户单击它即可上传文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-279">For example, you can provide a button that the user clicks to upload the file.</span></span> <span data-ttu-id="f3009-280">你编写的用于保存指定文件的代码应调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法, 该方法会将文件内容保存到服务器上的指定路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-280">The code that you write to save the specified file should call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method, which saves the contents of a file to a specified path on the server.</span></span> <span data-ttu-id="f3009-281">通常, <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>在引发回发到服务器的事件的事件处理方法中调用方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-281">Typically, the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called in an event-handling method for an event that raises a post back to the server.</span></span> <span data-ttu-id="f3009-282">例如, 如果你提供了一个按钮来提交文件, 则将文件保存到服务器的代码可以包含在 click 事件的事件处理方法内。</span><span class="sxs-lookup"><span data-stu-id="f3009-282">For example, if you provide a button to submit a file, the code to save the file to the server could then be included inside the event-handling method for the click event.</span></span>  
  
 <span data-ttu-id="f3009-283">调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法时, 必须指定要在其中保存上载文件的服务器上的目录的完整路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-283">When you call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method, you must specify the full path of the directory on the server in which to save the uploaded file.</span></span> <span data-ttu-id="f3009-284">如果未在应用程序代码中显式指定路径, 则当用户<xref:System.Web.HttpException>尝试上传文件时, 将引发异常。</span><span class="sxs-lookup"><span data-stu-id="f3009-284">If you do not explicitly specify a path in your application code, an <xref:System.Web.HttpException> exception is thrown when a user attempts to upload a file.</span></span> <span data-ttu-id="f3009-285">此行为可帮助用户指定要在其中保存其上传的文件的路径, 从而有助于保护服务器上的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-285">This behavior helps keep the files on the server secure, by not allowing users to specify a path in which to save the files that they upload.</span></span>  
  
 <span data-ttu-id="f3009-286">在调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法之前, 应<xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>使用<xref:System.Web.UI.WebControls.FileUpload>属性来验证控件是否包含要上载的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-286">Before calling the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method, you should use the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> property to verify that the <xref:System.Web.UI.WebControls.FileUpload> control contains a file to upload.</span></span> <span data-ttu-id="f3009-287"><xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>如果返回`true`, 则调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法。</span><span class="sxs-lookup"><span data-stu-id="f3009-287">If the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> returns `true`, call the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method.</span></span> <span data-ttu-id="f3009-288">如果它返回`false`, 则向用户显示一条消息, 指示该控件不包含文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-288">If it returns `false`, display a message to the user indicating that the control does not contain a file.</span></span> <span data-ttu-id="f3009-289">如果未提供错误处理代码来验证文件是否存在, 则尝试保存不<xref:System.Web.HttpException>存在的文件会引发异常。</span><span class="sxs-lookup"><span data-stu-id="f3009-289">If you do not provide error-handling code to verify that a file exists, an attempt to save a nonexistent file throws an <xref:System.Web.HttpException> exception.</span></span>  
  
 <span data-ttu-id="f3009-290">若要运行的<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>调用, ASP.NET 应用程序必须具有对服务器上的目录的写访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-290">For a call to the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> to work, the ASP.NET application must have write access to the directory on the server.</span></span> <span data-ttu-id="f3009-291">应用程序可以通过两种方式获取写入访问权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-291">There are two ways that the application can get write access.</span></span> <span data-ttu-id="f3009-292">你可以在将保存上载文件的目录中显式授予对运行应用程序的帐户的写入权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-292">You can explicitly grant write access to the account under which the application is running, in the directory in which the uploaded files will be saved.</span></span> <span data-ttu-id="f3009-293">或者, 可以增加授予 ASP.NET 应用程序的信任级别。</span><span class="sxs-lookup"><span data-stu-id="f3009-293">Alternatively, you can increase the level of trust that is granted to the ASP.NET application.</span></span> <span data-ttu-id="f3009-294">若要对应用程序的执行目录进行写入访问, 必须为应用程序授予<xref:System.Web.AspNetHostingPermission>信任级别设置<xref:System.Web.AspNetHostingPermissionLevel.Medium?displayProperty=nameWithType>为值的对象。</span><span class="sxs-lookup"><span data-stu-id="f3009-294">To get write access to the executing directory for the application, the application must be granted the <xref:System.Web.AspNetHostingPermission> object with the trust level set to the <xref:System.Web.AspNetHostingPermissionLevel.Medium?displayProperty=nameWithType> value.</span></span> <span data-ttu-id="f3009-295">提高信任级别会增加应用程序访问服务器上资源的权限。</span><span class="sxs-lookup"><span data-stu-id="f3009-295">Increasing the level of trust increases the application's access to resources on the server.</span></span> <span data-ttu-id="f3009-296">请注意, 这并不是一种安全的方法, 因为获得您的应用程序控制的恶意用户也可以在这一更高的信任级别下运行。</span><span class="sxs-lookup"><span data-stu-id="f3009-296">Note that this is not a secure approach, because a malicious user who gains control of your application will also be able to run under this higher level of trust.</span></span> <span data-ttu-id="f3009-297">最佳做法是在具有运行该应用程序所需的最低权限的用户上下文中运行 ASP.NET 应用程序。</span><span class="sxs-lookup"><span data-stu-id="f3009-297">It is a best practice to run an ASP.NET application in the context of a user who has the minimum privileges that are required for the application to run.</span></span> <span data-ttu-id="f3009-298">有关 ASP.NET 应用程序中的安全性的详细信息, 请参阅[Web 应用程序的基本安全实践](https://msdn.microsoft.com/library/3eeeee9e-b09f-4c7f-8ce5-d9ca1f9322ad)和[ASP.NET 信任级别和策略文件](https://msdn.microsoft.com/library/f897c794-10d3-414c-86b7-59b66564bbf1)。</span><span class="sxs-lookup"><span data-stu-id="f3009-298">For more information about security in ASP.NET applications, see [Basic Security Practices for Web Applications](https://msdn.microsoft.com/library/3eeeee9e-b09f-4c7f-8ce5-d9ca1f9322ad) and [ASP.NET Trust Levels and Policy Files](https://msdn.microsoft.com/library/f897c794-10d3-414c-86b7-59b66564bbf1).</span></span>  
  
   
  
## Examples  
 <span data-ttu-id="f3009-299">下面的示例演示如何创建<xref:System.Web.UI.WebControls.FileUpload>执行错误检查的控件。</span><span class="sxs-lookup"><span data-stu-id="f3009-299">The following example demonstrates how to create a <xref:System.Web.UI.WebControls.FileUpload> control that performs error checking.</span></span> <span data-ttu-id="f3009-300">在保存文件之前, <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A>将调用方法来验证要上传的文件是否存在。</span><span class="sxs-lookup"><span data-stu-id="f3009-300">Before the file is saved, the <xref:System.Web.UI.WebControls.FileUpload.HasFile%2A> method is called to verify that a file to upload exists.</span></span> <span data-ttu-id="f3009-301">此外, <xref:System.IO.File.Exists%2A?displayProperty=nameWithType>调用方法以检查路径中是否已存在同名的文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-301">In addition, the <xref:System.IO.File.Exists%2A?displayProperty=nameWithType> method is called to check whether a file that has the same name already exists in the path.</span></span> <span data-ttu-id="f3009-302">如果是这样, 则在调用<xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A>方法之前, 要上传的文件的名称以数字为前缀。</span><span class="sxs-lookup"><span data-stu-id="f3009-302">If it does, the name of the file to upload is prefixed with a number before the <xref:System.Web.UI.WebControls.FileUpload.SaveAs%2A> method is called.</span></span> <span data-ttu-id="f3009-303">这可以防止覆盖现有文件。</span><span class="sxs-lookup"><span data-stu-id="f3009-303">This prevents the existing file from being overwritten.</span></span>  
  
 [!code-aspx-csharp[FileUpload.SaveAs#1](~/samples/snippets/csharp/VS_Snippets_WebNet/FileUpload.SaveAs/cs/fileupload.saveascs.aspx#1)]
 [!code-aspx-vb[FileUpload.SaveAs#1](~/samples/snippets/visualbasic/VS_Snippets_WebNet/FileUpload.SaveAs/VB/fileupload.saveasvb.aspx#1)]  
  
 ]]></format>
        </remarks>
        <exception cref="T:System.Web.HttpException"><span data-ttu-id="f3009-304"><paramref name="filename" /> 不是完整路径。</span><span class="sxs-lookup"><span data-stu-id="f3009-304"><paramref name="filename" /> is not a full path.</span></span></exception>
        <altmember cref="P:System.Web.UI.WebControls.FileUpload.HasFile" />
        <related type="Article" href="https://msdn.microsoft.com/library/3eeeee9e-b09f-4c7f-8ce5-d9ca1f9322ad"><span data-ttu-id="f3009-305">Web 应用程序的基本安全实践</span><span class="sxs-lookup"><span data-stu-id="f3009-305">Basic Security Practices for Web Applications</span></span></related>
      </Docs>
    </Member>
  </Members>
</Type>